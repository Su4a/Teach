НАСТРОЙКИ
1.enable - открыть рут права
2.configure terminal - зайти в настройки конфигурации
3.exit - выйти из текущего меню
4.end - выйти из всех меню
5.no - отмена команды, написать такую же команду но с no

СТАТИЧЕСКАЯ МАРШРУТИЗАЦИЯ
1.interface Fa0/0 - открыть настройки нужного интерфейса
2.ip address 10.0.0.10 255.255.255.0  - назначение ИП адреса и Маски на выбранном интерфейсе
3.ip route 192.168.0.0 255.255.255.0 1.1.1.2 - ИП адрес сети назначения и следующий ХОП, куда слать пакет в сеть (IP сети и маска интерфейса нужной сети и IP интерфейса следующего роутера, за которого выходит сеть)
- ip route 192.168.0.0 255.255.255.0 Fa0/1 - назначение следующего хопа как выходной интерфейс (нерекомендуемое из за низкой скорости ответа из за АРП запросов и ответов)
- ip route 0.0.0.0 0.0.0.0 1.1.1.2 - установить маршрут по умолчанию (все неизвестные сети по этому пути)
4.no shutdows - поднять интерфейс
5.do ping 192.168.0.10 - пропинговать устрйоство с роутера (точка - пакет потерян, восклицаельный знак - все ок)


ДИНАМИЧЕСКАЯ МАРШРУТИЗАЦИЯ OSPF
1.router ospf <1-65535> - включение OSPF процесса на роутре под заданным номером (router ospf 1)
2.router-id 12.12.12.12 - назаначение Router-ID на роутере (уникальное 32 битовое число)
3.network 1.1.1.0 0.0.0.255 area 0 - включение сети 1.1.1.0/24 в OSPF процесс в area 0 (соответственно и интерфейс из этой сети включается в процесс OSPF) (IP сети, обратная маска сети, область к которой она относится) - рассказать соседним роутерам о данной сети
- no network 1.1.1.0 0.0.0.255 area 0 - удалить сеть из таблицы маршрутизации


VLAN
1.interface GigabitEthernet0/0/0.10 - создание подынтерфейса на порту GigabitEthernet0/0/0 с ID 10 (как правило указывается номер совпадающий с номером интерфейса)
- encapsulation dot1Q 10 - включение подынтерфейса GigabitEthernet0/0/0.10 во влан 10
- ip address 10.0.0.1 255.255.255.0 - (не забывайте назначить IP адрес, который будет шлюзом по умолчанию для VLAN сети)
- no ip address - удалить ИП адрес
2.interface GigabitEthernet0/0/0.20 - создание подынтерфейса на порту GigabitEthernet0/0/0 с ID 20.
- encapsulation dot1Q 20 - включение подынтерфейса GigabitEthernet0/0/0.10 во влан 20.
- ip address 10.0.0.1 255.255.255.0 - (не забывайте назначить IP адрес, который будет шлюзом по умолчанию для VLAN сети)
- no ip address - удалить ИП адрес

ТУННЕЛИРОВАНИЕ GRE
1.interface Tunnel 777 - задать имя интерфейса и вход в интерфейс (777 в даном случае)
2.ip address 172.16.0.1 255.255.255.0 - установить IP туннельного интерфейса (IP адрес должен лежать в одной сети с другим туннельным интерфейсом)
3.mtu 1476 (специально занижается, устанавлвиается самостоятельно, прописывать не нужно)
4.tunnel source GigabitEthernet0/0/1 - установить источником туннельного интерфейса IP адрес соурса, который будет устанавлвиаться в первом L3 заголовке (устанавлвиается внешний интерфейс роутера т.е. который ведет в интернет, а не в локальную сеть)
5.tunnel destination 4.4.4.2 - публичный IP адрес удаленного роутера для туннелирования, который будет устанавлвиаться во втором L3 заголовке
6.ip route 192.168.0.0 255.255.255.0 172.16.0.2 - маршрут по умолчанию в удаленную сеть (IP удаленной локальной сети(в которую нужно попасть), маска удаленной локальной сети, следующий хоп туннельной сети (IP туннельного интерфейса нужной сети, в которую нужно попасть)
7.Аналогичные встречные настройки на другом роутера (Важно чтобы тунельные ИП лежали в одной туннельной сети)

NAT
1.Определение inside интерфейса (внутреннего)
interface GigabitEthernet0/0/0
 - ip address 10.0.0.1 255.255.255.0
 - ip nat inside
 - duplex auto
 - speed auto
2.Определение outside интерфейса (наружного)
interface GigabitEthernet0/0/1
 - ip address 7.7.7.1 255.255.255.0
 - ip nat outside
 - duplex auto
 - speed auto
3.Настройка статического NAT
- ip nat inside source static 10.0.0.100 7.7.7.1 - задаем правило трансляции IP 10.0.0.100 в 7.7.7.1 (IP компьютра из локальной сети в статичный IP публичной сети, выделенным провайдером)

PAT
1.Определение inside интерфейса (внутреннего)
interface GigabitEthernet0/0/0
 - ip address - IP адрес роутера локальной сети сети + маска
 - ip nat inside
 - duplex auto
 - speed auto
2.Определение outside интерфейса (наружного)
interface GigabitEthernet0/0/1
 - ip address - IP адрес выделенный провайдером + маска
 - ip nat outside
 - duplex auto
 - speed auto
3.Описываем Access list, который включает в себя диапазон src IP из локальной сети 10.0.0.0/24
- ip access-list standard NET_10.0.0.0/24 - NET_10.0.0.0/24 это любое название листа
- permit 10.0.0.0 0.0.0.255  - IP адрес локальной сети и обратная маска (включить весь зиапазон списка для трансляции)
Затем задаем правило PAT-трансляции всех IP из нашего Access list'а в IP адрес, который настроен на GigabitEthernet0/0/0 (к локальной сети)
- ip nat inside source list NET_10.0.0.0/24 interface GigabitEthernet0/0/0 overload
4.Удаление динамических записей в NAT:
- clear ip nat translation * - удаление динамических записей в NAT

PORT FORWARDING
1.Определение inside интерфейса (внутреннего)
interface GigabitEthernet0/0/0
 - ip address - IP адрес роутера локальной сети сети + маска
 - ip nat inside
 - duplex auto
 - speed auto
2.Определение outside интерфейса (наружного)
interface GigabitEthernet0/0/1
 - ip address - IP адрес выделенный провайдером + маска
 - ip nat outside
 - duplex auto
 - speed auto
2.Задаем статическую трансляцию 6.6.6.1:80 в 10.0.0.100:80
- ip nat inside source static tcp 10.0.0.100 80 6.6.6.1 80 - IP локального сервера, порт, IP публичный маршруизатора, порт (если приходит трафик на публичный 6.6.6.1:80 то он передается в локальную сеть на сервер)
Здесь мы задаем статическую трансляцию 6.6.6.1:443 уже в 10.0.0.101:443
- ip nat inside source static tcp 10.0.0.101 443 6.6.6.1 443  - IP локального сервера, порт, IP публичный маршруизатора, порт



ПРОСМОТР
1.show ip route - посмотреть таблицу маршрутизации
2.show arp - просмотр таблицы АРП
3.do sh run - сохранить изменения и вывести инфу
4.show ip ospf int (brief) - просмотр интерфейсов, включенных в OSPF процесс (sh ip int br)
5.show ip ospf nei - просмотр соседей по OSPF
6.show ip route ospf - просмотр маршрутов, заинсталлированных в таблицу маршрутизации по протоколу OSPF
7.show ip ospf neighbor - просмотр соседей
8.show ip nat translations - просмотр NAT





