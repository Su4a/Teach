CTE - Common Table Expressions - своего рода функции
WITH - подзапрос, результат которого мы сохраняем во временную переменную, далее используя ее в качестве другого запроса
WITH поддерживает вложенность
Поля прописывать необязательно
В одном запросе WITH можно создавать несколько функций

- WITH имя_функции AS (поля) (тело_функции)
- WITH имя_функции1 AS (поля) (тело_функции), имя_функции2 AS (поля) (тело_функции)

Пример:
WITH имя_функции1 AS 
(
	SELECT имя_поля FROM имя_таблицы
	WHERE имя_поля = условие
)
SELECT * FROM имя_функции1

Рекурсивные CTE
CTE явряется рекурсивным, если его подзапрос ссылается на его собственное имя
Если планируется исползовать рекурсивный СТЕ то в запрос должен быть включен параметр RECURSIVE

Пример:
WITH RECURSIVE имя_функции1 (n) AS
(
	SELECT 0
	UNION ALL
	SELECT n + 1
	FROM имя_функции1
	WHERE n + 1 <= 10
)
SELECT n FROM имя_функции1



